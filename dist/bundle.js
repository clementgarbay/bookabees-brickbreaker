(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default={screen:{width:800,height:600},velocityX:-75,velocityY:-300,lives:3,nbBrickLines:3,brickMargin:20};var baseStyle=exports.baseStyle={font:"30px Arial",fill:"#fff",align:"center"}},{}],2:[function(require,module,exports){(function(global){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.restartGame=restartGame;exports.gameOver=gameOver;var _phaser=typeof window!=="undefined"?window["Phaser"]:typeof global!=="undefined"?global["Phaser"]:null;var _phaser2=_interopRequireDefault(_phaser);var _config=require("./config");var _config2=_interopRequireDefault(_config);var _game=require("./states/game");var _game2=_interopRequireDefault(_game);var _gameover=require("./states/gameover");var _gameover2=_interopRequireDefault(_gameover);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var game=new _phaser2.default.Game(_config2.default.screen.width,_config2.default.screen.height,_phaser2.default.AUTO,"game");game.state.add("game",_game2.default);game.state.add("gameOver",_gameover2.default);game.state.start("game");function restartGame(){game.state.start("game")}function gameOver(score){game.state.start("gameOver",true,false,{score:score})}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./config":1,"./states/game":3,"./states/gameover":4}],3:[function(require,module,exports){(function(global){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _phaser=typeof window!=="undefined"?window["Phaser"]:typeof global!=="undefined"?global["Phaser"]:null;var _phaser2=_interopRequireDefault(_phaser);var _config=require("../config");var _config2=_interopRequireDefault(_config);var _main=require("../main");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Game=function(){function Game(game){_classCallCheck(this,Game);this.game=game}_createClass(Game,[{key:"preload",value:function preload(){this.game.load.image("ball","assets/images/ball.png");this.game.load.image("brick","assets/images/brick.png");this.game.load.image("paddle","assets/images/paddle.png");this.game.load.image("background","assets/images/bg.png")}},{key:"create",value:function create(){this.game.scale.scaleMode=_phaser2.default.ScaleManager.SHOW_ALL;this.game.scale.pageAlignHorizontally=true;this.game.scale.pageAlignVertically=true;this.game.stage.backgroundColor="#fff";this.game.add.sprite(0,0,"background").scale.set(.5);this.game.physics.startSystem(_phaser2.default.Physics.ARCADE);this.paddle=this.game.add.sprite(this.game.world.centerX,500,"paddle");this.paddle.anchor.set(.5);this.game.physics.enable(this.paddle,_phaser2.default.Physics.ARCADE);this.paddle.body.collideWorldBounds=true;this.paddle.body.bounce.set(1);this.paddle.body.immovable=true;this.ball=this.game.add.sprite(this.game.world.centerX,this.paddle.y-20,"ball");this.ball.anchor.set(.5);this.ball.checkWorldBounds=true;this.game.physics.enable(this.ball,_phaser2.default.Physics.ARCADE);this.ball.body.collideWorldBounds=true;this.ball.body.bounce.set(1);this.bricks=this.game.add.group();this.bricks.enableBody=true;this.bricks.physicsBodyType=_phaser2.default.Physics.ARCADE;this.addBricks();this.score=0;this.lives=_config2.default.lives;this.drawScore();this.drawLives();this.drawIntroText();this.game.input.onDown.add(this.startBall,this);this.game.input.keyboard.addKey(_phaser2.default.Keyboard.SPACEBAR).onDown.add(this.startBall,this)}},{key:"update",value:function update(){var ballWidth=this.game.cache.getImage("ball").width;this.movePaddle();if(!this.isRunning){this.ball.body.x=this.paddle.x-ballWidth/2}else if(this.game.world.height-this.ball.y<10){this.ballLost()}else{this.game.physics.arcade.collide(this.ball,this.paddle,this.ballHitPaddle,null,this);this.game.physics.arcade.collide(this.ball,this.bricks,this.ballHitBrick,null,this)}}},{key:"drawScore",value:function drawScore(){this.scoreText=this.game.add.text(30,this.game.world.height-60,"Score: "+this.score,Object.assign({},_config.baseStyle,{font:"20px Arial",align:"left"}))}},{key:"updateScore",value:function updateScore(){var scoreIncrement=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;this.score+=scoreIncrement;this.scoreText.text="Score: "+this.score}},{key:"drawLives",value:function drawLives(){this.livesText=this.game.add.text(this.game.world.width-100,this.game.world.height-60,"Lives: "+this.lives,Object.assign({},_config.baseStyle,{font:"20px Arial",align:"left"}))}},{key:"updateLives",value:function updateLives(){var livesDecrement=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;this.lives-=livesDecrement;this.livesText.text="Lives: "+this.lives}},{key:"drawIntroText",value:function drawIntroText(){var text=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"Click to start";this.introText=this.game.add.text(this.game.world.centerX,300,text,Object.assign({},_config.baseStyle,{font:"40px Arial"}));this.introText.anchor.set(.5)}},{key:"addBricks",value:function addBricks(){var _this=this;var brickImg=this.game.cache.getImage("brick");var nbBricks=1;Array.from(Array(_config2.default.nbBrickLines).keys()).forEach(function(j){Array.from(Array(nbBricks).keys()).forEach(function(i){var x=i*brickImg.width+_config2.default.brickMargin*(i+1);var y=100+j*brickImg.height+_config2.default.brickMargin*(j+1);var brick=_this.bricks.create(x,y,"brick");brick.body.bounce.set(1);brick.body.immovable=true})})}},{key:"movePaddle",value:function movePaddle(){var paddleWidth=this.game.cache.getImage("paddle").width;this.paddle.x=this.game.input.x;if(this.paddle.x<30)this.paddle.x=30;if(this.paddle.x+paddleWidth>this.game.world.width)this.paddle.x=this.game.world.width-paddleWidth}},{key:"startBall",value:function startBall(){if(!this.isRunning){this.isRunning=true;this.ball.body.velocity.x=_config2.default.velocityX;this.ball.body.velocity.y=_config2.default.velocityY;this.ball.animations.play("spin");this.introText.visible=false}}},{key:"ballHitPaddle",value:function ballHitPaddle(ball,paddle){if(ball.x<paddle.x){var diff=paddle.x-ball.x;ball.body.velocity.x=-10*diff}else if(ball.x>paddle.x){var _diff=ball.x-paddle.x;ball.body.velocity.x=10*_diff}else{ball.body.velocity.x=2+Math.random()*8}}},{key:"ballHitBrick",value:function ballHitBrick(ball,brick){brick.kill();this.updateScore();if(this.bricks.countLiving()===0){this.updateScore(100);this.drawIntroText("Next Level");this.ball.body.velocity.set(0);this.resetBall();this.bricks.callAll("revive");this.isRunning=false}}},{key:"ballLost",value:function ballLost(){this.updateLives();if(this.lives===0){(0,_main.gameOver)()}else{this.resetBall();this.isRunning=false}}},{key:"resetBall",value:function resetBall(){var paddleImg=this.game.cache.getImage("paddle");this.ball.reset(this.paddle.x+paddleImg.width/2,this.paddle.y-20);this.ball.animations.stop()}}]);return Game}();exports.default=Game}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../config":1,"../main":2}],4:[function(require,module,exports){(function(global){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _phaser=typeof window!=="undefined"?window["Phaser"]:typeof global!=="undefined"?global["Phaser"]:null;var _phaser2=_interopRequireDefault(_phaser);var _config=require("../config");var _main=require("../main");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var GameOver=function(){function GameOver(game){_classCallCheck(this,GameOver);this.game=game}_createClass(GameOver,[{key:"init",value:function init(params){this.score=params&&params.score||0}},{key:"preload",value:function preload(){this.game.load.image("background","assets/images/bg.png")}},{key:"create",value:function create(){this.game.scale.scaleMode=_phaser2.default.ScaleManager.SHOW_ALL;this.game.scale.pageAlignHorizontally=true;this.game.scale.pageAlignVertically=true;this.game.stage.backgroundColor="#fff";this.game.add.sprite(0,0,"background").scale.set(.5);this.game.add.text(this.game.world.centerX,80,"Score",_config.baseStyle).anchor.set(.5);this.game.add.text(this.game.world.centerX,140,this.score,Object.assign({},_config.baseStyle,{font:"50px Arial"})).anchor.set(.5);this.game.add.text(this.game.world.centerX,300,"Game over!",Object.assign({},_config.baseStyle,{font:"80px Arial"})).anchor.set(.5);this.game.add.text(this.game.world.centerX,370,"Click to try again",_config.baseStyle).anchor.set(.5);this.game.input.onDown.add(_main.restartGame,this);this.game.input.keyboard.addKey(_phaser2.default.Keyboard.SPACEBAR).onDown.add(_main.restartGame,this)}}]);return GameOver}();exports.default=GameOver}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../config":1,"../main":2}]},{},[2]);
